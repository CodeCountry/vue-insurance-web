webpackJsonp([32],{"3KPH":function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=o("woOf"),a=o.n(r),l={data:function(){return{loading:!0,editLoading:!1,labelPosition:"left",tableData:[],form:{},rules:{name:[{required:!0,message:"请输入路由名称",trigger:"blur"}],intro:[{required:!0,message:"请输入路由介绍",trigger:"blur"}],product:[{required:!0,message:"请输入保障产品",trigger:"blur"}],insurerProduct:[{required:!0,message:"请选择保险公司",trigger:"blur"}],priority:[{required:!0,message:"请输入优先级",trigger:"blur"}],conditions:[{required:!0,message:"请输入条件范围",trigger:"blur"}]},titleArr:[],dialogRouter:!1}},created:function(){var t=this,e=this;e.loading=!1,e.form.productId=JSON.parse(localStorage.getItem("product")).id,console.log(e.form.productId),e.$api.get("/product/"+e.form.productId,null,function(t){console.log(t.data.routes),200===t.code?(e.loading=!1,e.getTable(t)):alert(t.message),e.loading=!1},function(e){t.$router.push({path:"/login"})})},methods:{getTable:function(t){var e=this;e.total=t.data.total,e.tableData=t.data.routes,e.loading=!1,console.log(e.tableData);for(var o=0;o<e.tableData.length;o++)e.tableData[o].product=e.tableData[o].product.name,e.tableData[o].insurerProduct=e.tableData[o].insurerProduct.name},handleModifyStatus:function(t){var e=this;e.form=a()({},t),e.$api.post("/insuranceroute/activation/"+e.form.id+"/"+!e.form.active,null,function(t){200===t.code?(e.$message({message:"操作成功！",type:"success"}),e.$router.go(0)):alert(t.message)},function(t){e.$router.push({path:"/login"})})},handleAdd:function(){this.$router.push("/add_router")},handleEdit:function(t,e){var o=this;o.dialogRouter=!0,o.$api.get("/insurerproduct/option/all",null,function(t){console.log(t.data),200===t.code?o.titleArr=t.data:alert(t.message)}),o.form=a()({},e),o.table_index=t},handleSave:function(t){var e=this;e.$refs[t].validate(function(t){t&&(e.editLoading=!0,e.form.productId=JSON.parse(localStorage.getItem("product")).id,e.form.insurerProductId=e.form.insurerProduct,e.$api.post("/insuranceroute/",e.form,function(t){200===t.code?(e.editLoading=!1,e.$router.go(0),e.$message({message:"操作成功！",type:"success"})):(alert(t.message),e.editLoading=!1)},function(t){e.$router.push({path:"/login"})}))})},handleDelete:function(t){var e=this;this.$confirm("确认删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",cancelButtonClass:"cancel"}).then(function(){var o=e;o.form=a()({},t),console.log(o.form.id),o.$api.delete("/insuranceroute/"+o.form.id,null,function(t){200===t.code?(e.$message({message:"操作成功！",type:"success"}),o.$router.go(0),o.total=o.total-1):alert(t.message),o.loading=!1},function(t){e.$router.push({path:"/login"})})}).catch(function(){})}}},i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("el-button",{staticStyle:{"margin-bottom":"20px"},attrs:{type:"primary",size:"small",icon:"el-icon-circle-plus-outline"},on:{click:function(e){t.handleAdd()}}},[t._v("添加")]),t._v(" "),o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[o("el-table-column",{attrs:{type:"index",label:"序号",width:"60"}}),t._v(" "),o("el-table-column",{attrs:{prop:"name",label:"路由名称"}}),t._v(" "),o("el-table-column",{attrs:{prop:"intro",label:"路由介绍"}}),t._v(" "),o("el-table-column",{attrs:{prop:"product",label:"保障产品"}}),t._v(" "),o("el-table-column",{attrs:{prop:"insurerProduct",label:"保险产品"}}),t._v(" "),o("el-table-column",{attrs:{prop:"priority",label:"优先级"}}),t._v(" "),o("el-table-column",{attrs:{prop:"conditions",label:"触发条件"}}),t._v(" "),o("el-table-column",{attrs:{label:"上下架"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.active?o("span",{staticClass:"blue"},[t._v("是")]):o("span",{staticClass:"red"},[t._v("否")])]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"操作",fixed:"right",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.active?o("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(o){t.handleModifyStatus(e.row)}}},[t._v("下架")]):o("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(o){t.handleModifyStatus(e.row)}}},[t._v("上架")]),t._v(" "),o("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(o){t.handleEdit(e.$index,e.row)}}},[t._v("编辑")]),t._v(" "),o("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(o){t.handleDelete(e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),o("el-dialog",{attrs:{title:"修改路由信息",visible:t.dialogRouter,width:"30%"},on:{"update:visible":function(e){t.dialogRouter=e}}},[o("el-form",{ref:"form",attrs:{"label-position":t.labelPosition,"label-width":"110px",rules:t.rules,model:t.form}},[o("el-form-item",{attrs:{label:"路由名称",prop:"name"}},[o("el-input",{staticStyle:{width:"80%"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"路由介绍",prop:"intro"}},[o("el-input",{staticStyle:{width:"80%"},model:{value:t.form.intro,callback:function(e){t.$set(t.form,"intro",e)},expression:"form.intro"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"保障产品",prop:"product"}},[o("el-input",{staticStyle:{width:"80%"},attrs:{disabled:"disabled"},model:{value:t.form.product,callback:function(e){t.$set(t.form,"product",e)},expression:"form.product"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"保险产品",prop:"insurerProduct"}},[o("el-select",{attrs:{placeholder:"保险产品"},model:{value:t.form.insurerProduct,callback:function(e){t.$set(t.form,"insurerProduct",e)},expression:"form.insurerProduct"}},t._l(t.titleArr,function(t){return o("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})}))],1),t._v(" "),o("el-form-item",{attrs:{label:"优先级",prop:"priority"}},[o("el-input",{staticStyle:{width:"80%"},model:{value:t.form.priority,callback:function(e){t.$set(t.form,"priority",e)},expression:"form.priority"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"触发条件",prop:"conditions"}},[o("el-input",{attrs:{type:"textarea"},model:{value:t.form.conditions,callback:function(e){t.$set(t.form,"conditions",e)},expression:"form.conditions"}})],1)],1),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.editLoading,expression:"editLoading"}],attrs:{type:"primary"},on:{click:function(e){t.handleSave("form")}}},[t._v("修改")]),t._v(" "),o("el-button",{on:{click:function(e){t.dialogRouter=!1}}},[t._v("取消")])],1)],1)],1)},n=[],s={render:i,staticRenderFns:n},u=s,c=o("VU/8"),d=c(l,u,!1,null,null,null);e.default=d.exports}});