webpackJsonp([22],{EiAf:function(e,r,n){r=e.exports=n("FZ+f")(!1),r.push([e.i,"\n.submit_style{\n  padding:8px 12px;\n  border:none;\n  background-color: #409eff;\n  border-radius: 3px;\n  color: #fff;\n}\n.submit_style:focus, .submit_style:hover {\n  color: #fff;\n  border-color: #66b1ff;\n  background-color:#66b1ff;\n}\n.el-form-item{\n  margin-bottom:32px;\n}\n",""])},FPZ0:function(e,r,n){var t=n("EiAf");"string"==typeof t&&(t=[[e.i,t,""]]),t.locals&&(e.exports=t.locals);n("rjj0")("72ee35e5",t,!0)},tctr:function(e,r,n){"use strict";function t(e){n("FPZ0")}Object.defineProperty(r,"__esModule",{value:!0});var l=(n("mtWM"),{data:function(){var e=function(e,r,n){""===r?n(new Error("不能为空")):r.match("^[0-9]*$")?n():n(new Error("请输入纯数字"))};return{isAble:!0,editLoading:!1,formInline:{sheetName:"",columns:"",beginDate:"",endDate:"",insurerName:"",orderNoColumn:"",file:"",filename:""},productArr:[],insurerArr:[],rules:{sheetName:[{required:!0,message:"请输入当前表格的名称即sheet名（区分大小写）",trigger:"blur"}],columns:[{required:!0,validator:e,message:"请输入的有效总列数（纯数字）",trigger:"blur"}],beginDate:[{required:!0,message:"请输入时间段",trigger:"blur"}],endDate:[{required:!0,message:"请输入时间段",trigger:"blur"}],insurerName:[{required:!0,message:"请选择保险公司",trigger:"change"}],orderNoColumn:[{required:!0,validator:e,message:"请输入保单号所在列（纯数字）",trigger:"blur"}],file:[{required:!0,message:"请上传文件",trigger:"blur"}]},fileList:[]}},created:function(){var e=this,r=this;r.$api.get("/product/all/name",null,function(e){200===e.code?(r.productArr=e.data,1===e.data.length&&(r.formInline.productName=e.data[0].id,r.getInsurerName())):alert(e.message)},function(r){e.$router.push({path:"/login"})}),r.$api.get("/insurer/option/all",null,function(e){console.log(e.data),200===e.code?r.insurerArr=e.data:alert(e.message)})},methods:{getInsurerName:function(){var e=this,r=this;r.$api.get("/insurer/"+r.formInline.productName+"/product",null,function(e){200===e.code?1===e.data.length?r.formInline.insurerName=e.data[0].id:0===e.data.length&&(r.formInline.insurerName=""):alert(e.message)},function(r){e.$router.push({path:"/login"})})},uploadFile:function(e){this.formInline.file=e.target.files[0],this.formInline.filename=e.target.files[0].name},onSubmit:function(){var e=this;e.$refs.formInline.validate(function(r){if(!r)return console.log("error submit!!"),!1;e.editLoading=!0,document.getElementById("form_upload").submit(),e.editLoading=!1})}}}),i=function(){var e=this,r=e.$createElement,n=e._self._c||r;return n("div",[n("div",{staticClass:"top"},[n("div",{staticClass:"title",staticStyle:{"margin-bottom":"20px"}},[e._v("保单核对")]),e._v(" "),n("el-form",{ref:"formInline",attrs:{inline:!0,model:e.formInline,enctype:"multipart/form-data",rules:e.rules,id:"form_upload",method:"post",action:"/order/verification_ply_no"}},[n("el-form-item",{attrs:{label:"工作空间",prop:"sheetName"}},[n("el-input",{attrs:{placeholder:"请输入工作空间名",name:"sheetName"},model:{value:e.formInline.sheetName,callback:function(r){e.$set(e.formInline,"sheetName",r)},expression:"formInline.sheetName"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"保单号所在列",prop:"orderNoColumn"}},[n("el-input",{attrs:{placeholder:"请输入保单号所在列",name:"orderNoColumn"},model:{value:e.formInline.orderNoColumn,callback:function(r){e.$set(e.formInline,"orderNoColumn",r)},expression:"formInline.orderNoColumn"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"列数",prop:"columns"}},[n("el-input",{attrs:{placeholder:"请输入列数",name:"columns"},model:{value:e.formInline.columns,callback:function(r){e.$set(e.formInline,"columns",r)},expression:"formInline.columns"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"选择日期段",name:"beginDate",prop:"beginDate"}},[n("el-date-picker",{attrs:{"start-placeholder":"开始日期","value-format":"yyyyMMdd",name:"beginDate"},model:{value:e.formInline.beginDate,callback:function(r){e.$set(e.formInline,"beginDate",r)},expression:"formInline.beginDate"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"选择日期段",name:"endDate",prop:"endDate"}},[n("el-date-picker",{attrs:{"end-placeholder":"结束日期","value-format":"yyyyMMdd",name:"endDate"},model:{value:e.formInline.endDate,callback:function(r){e.$set(e.formInline,"endDate",r)},expression:"formInline.endDate"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"保障产品",prop:"productName"}},[n("el-select",{attrs:{name:"productName",placeholder:"保障产品"},on:{change:function(r){e.getInsurerName()}},model:{value:e.formInline.productName,callback:function(r){e.$set(e.formInline,"productName",r)},expression:"formInline.productName"}},e._l(e.productArr,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),n("el-form-item",{attrs:{label:"保险公司",prop:"insurerName"}},[n("el-select",{attrs:{name:"insurerName",placeholder:"保险公司"},model:{value:e.formInline.insurerName,callback:function(r){e.$set(e.formInline,"insurerName",r)},expression:"formInline.insurerName"}},e._l(e.insurerArr,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),n("el-form-item",{attrs:{label:"选择文件",prop:"file"}},[n("div",{staticClass:"upload_file"},[n("input",{ref:"file",attrs:{type:"file",name:"file",id:"file"},on:{change:e.uploadFile}}),e._v(" "),n("input",{staticClass:"submit_style",attrs:{type:"button",size:"small",value:"上传文件"}})]),e._v(" "),n("div",{staticClass:"fileName",staticStyle:{display:"inline"},domProps:{textContent:e._s(e.formInline.filename)}})]),e._v(" "),n("el-form-item",[e.editLoading?n("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.editLoading,expression:"editLoading"}],attrs:{type:"primary",size:"medium",disabled:""}},[e._v("上传到服务器")]):n("el-button",{attrs:{type:"primary",size:"medium"},on:{click:function(r){e.onSubmit("formInline")}}},[e._v("上传到服务器")]),e._v(" "),n("div",{staticStyle:{display:"inline"}},[e._v("只能上传.xlsx/.xls文件，且不超过2MB")])],1)],1)],1)])},a=[],o={render:i,staticRenderFns:a},s=o,m=n("VU/8"),u=t,d=m(l,s,!1,u,null,null);r.default=d.exports}});