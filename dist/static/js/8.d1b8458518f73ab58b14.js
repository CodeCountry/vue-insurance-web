webpackJsonp([8],{LTeQ:function(e,t,o){t=e.exports=o("FZ+f")(!1),t.push([e.i,"\n.submit_style{\n  padding:8px 12px;\n  border:none;\n  background-color: #409eff;\n  border-radius: 3px;\n  color: #fff;\n}\n.submit_style:focus, .submit_style:hover {\n  color: #fff;\n  border-color: #66b1ff;\n  background-color:#66b1ff;\n}\n",""])},rphn:function(e,t,o){var r=o("LTeQ");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);o("rjj0")("3e96f975",r,!0)},tkyT:function(e,t,o){"use strict";function r(e){o("rphn")}Object.defineProperty(t,"__esModule",{value:!0});var n=o("fZjL"),l=o.n(n),i=(o("mtWM"),{data:function(){return{isProduct:!1,postUrl:"",formInline:{productCode:"",commodityCategory:"",downloadModel:"",beginDate:"",endDate:"",isDate1:"",isDate2:""},titleArr:[],categoryArr:[],modelArr:{},rules:{productCode:[{required:!0,message:"请选择保障名称",trigger:"blur"}],commodityCategory:[{required:!0,message:"请选择品类",trigger:"blur"}],downloadModel:[{required:!0,message:"请选择下载模板",trigger:"blur"}],beginDate:[{required:!0,message:"请输入时间段",trigger:"blur"}],endDate:[{required:!0,message:"请输入时间段",trigger:"blur"}]}}},created:function(){var e=this,t=this;t.$api.get("/product/export",null,function(e){console.log(e.data),200===e.code?(t.titleArr=e.data,1===e.data.length&&(t.formInline.productCode=e.data[0].id,t.sendProduct())):alert(e.message)},function(t){e.$router.push({path:"/login"})})},methods:{sendProduct:function(){var e=this,t=this;t.isProduct=!0,t.formInline.commodityCategory="",t.$api.get("/brandconfig/product/"+t.formInline.productCode+"/category",null,function(e){if(console.log(e.data),200===e.code){t.categoryArr=e.data;for(var o in e.data)1===l()(e.data).length&&(t.formInline.commodityCategory=o,console.log(t.formInline.commodityCategory))}else alert(e.message)},function(t){e.$router.push({path:"/login"})});for(var o=0;o<t.titleArr.length;o++)t.titleArr[o].id===t.formInline.productCode&&(t.modelArr=t.titleArr[o].exportTemplate,t.formInline.downloadModel=t.modelArr.id)},onSubmit:function(e){var t=this;t.formInline.isDate1=t.getTimeStamp(t.formInline.beginDate.split("-")[0],t.formInline.beginDate.split("-")[1],t.formInline.beginDate.split("-")[2]),t.formInline.isDate2=1e3*(t.getTimeStamp(t.formInline.endDate.split("-")[0],t.formInline.endDate.split("-")[1],t.formInline.endDate.split("-")[2])/1e3+86399),t.$refs.formInline.validate(function(e){if(!e)return console.log("error submit!!"),!1;console.log(t.formInline.endDate),t.postUrl="/order/export/template/"+t.formInline.downloadModel+"/"+t.formInline.isDate1+"/"+t.formInline.isDate2+"/"+t.formInline.productCode+"/"+t.formInline.commodityCategory,document.getElementById("form_output").action=t.postUrl,document.getElementById("form_output").submit()})}}}),a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("div",{staticClass:"top"},[o("div",{staticClass:"title",staticStyle:{"margin-bottom":"20px"}},[e._v("导出赠险数据")]),e._v(" "),o("el-form",{ref:"formInline",attrs:{inline:!0,model:e.formInline,enctype:"multipart/form-data",rules:e.rules,method:"post",id:"form_output",action:""}},[o("el-form-item",{attrs:{label:"保障产品",prop:"productCode"}},[o("el-select",{attrs:{placeholder:"保障产品"},on:{change:function(t){e.sendProduct()}},model:{value:e.formInline.productCode,callback:function(t){e.$set(e.formInline,"productCode",t)},expression:"formInline.productCode"}},e._l(e.titleArr,function(e){return o("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),e.isProduct?o("el-form-item",{attrs:{label:"品类",prop:"commodityCategory"}},[o("el-select",{attrs:{name:"commodityCategory",placeholder:"品类"},model:{value:e.formInline.commodityCategory,callback:function(t){e.$set(e.formInline,"commodityCategory",t)},expression:"formInline.commodityCategory"}},e._l(e.categoryArr,function(e,t){return o("el-option",{key:t,attrs:{label:e,value:t}})}))],1):e._e(),e._v(" "),e.isProduct?o("el-form-item",{attrs:{label:"选择下载模板",prop:"downloadModel"}},[o("el-select",{attrs:{name:"downloadModel",placeholder:"选择下载模板"},model:{value:e.formInline.downloadModel,callback:function(t){e.$set(e.formInline,"downloadModel",t)},expression:"formInline.downloadModel"}},[o("el-option",{key:e.modelArr.id,attrs:{label:e.modelArr.name,value:e.modelArr.id}})],1)],1):e._e(),e._v(" "),o("el-form-item",{attrs:{label:"进件开始日期",prop:"beginDate"}},[o("el-date-picker",{attrs:{"start-placeholder":"开始日期","value-format":"yyyy-MM-dd",name:"beginDate"},model:{value:e.formInline.beginDate,callback:function(t){e.$set(e.formInline,"beginDate",t)},expression:"formInline.beginDate"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"进件结束日期",prop:"endDate"}},[o("el-date-picker",{attrs:{"end-placeholder":"结束日期","value-format":"yyyy-MM-dd",name:"endDate"},model:{value:e.formInline.endDate,callback:function(t){e.$set(e.formInline,"endDate",t)},expression:"formInline.endDate"}})],1),e._v(" "),o("el-form-item",[o("input",{staticClass:"submit_style",staticStyle:{"margin-left":"10px"},attrs:{type:"button",size:"small",value:"导出数据"},on:{click:function(t){e.onSubmit()}}})])],1)],1)])},d=[],m={render:a,staticRenderFns:d},s=m,c=o("VU/8"),u=r,f=c(i,s,!1,u,null,null);t.default=f.exports}});