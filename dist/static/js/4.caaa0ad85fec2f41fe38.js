webpackJsonp([4],{"Q+AD":function(e,t,a){var r=a("kYiC");"string"==typeof r&&(r=[[e.i,r,""]]),r.locals&&(e.exports=r.locals);a("rjj0")("eb4f7b20",r,!0)},dt7e:function(e,t,a){"use strict";function r(e){a("Q+AD")}Object.defineProperty(t,"__esModule",{value:!0});var o=a("mvHQ"),n=a.n(o),l=a("woOf"),i=a.n(l),s={data:function(){return{labelPosition:"left",loading:!0,editLoading:!1,form:{},tableData:[],dialogFormVisible:!1,currentPage:1,pageSize:20,total:0,rules:{name:[{required:!0,message:"请输入保险公司名",trigger:"blur"}],intro:[{required:!0,message:"请输入介绍",trigger:"blur"}],category:[{required:!0,message:"请选择险种",trigger:"blur"}],coverage:[{required:!0,message:"请输入保额",trigger:"blur"}],insurerName:[{required:!0,message:"请选择所属保险公司",trigger:"blur"}],span:[{required:!0,message:"请输入保障时间",trigger:"blur"}],effectiveWay:[{required:!0,message:"请选择生效方式 ",trigger:"blur"}],code:[{required:!0,message:"请输入编码格式 ",trigger:"blur"}]},titleArr:[],categoryOption:[],effectiveWayOption:[]}},created:function(){var e=this;e.$api.get("/insurerproduct",null,function(t){console.log(t.data),200===t.code?e.getTable(t):alert(t.message)},function(t){e.$router.push("/login")}),e.$api.get("/insurer/all",null,function(t){console.log(t.data),200===t.code?e.titleArr=t.data:alert(t.message)},function(t){e.$router.push("/login")}),e.$api.get("insurerproduct/insuranceCategory",null,function(t){console.log(t.data),200===t.code?e.categoryOption=t.data:alert(t.message)},function(t){e.$router.push("/login")}),e.$api.get("insurerproduct/effectiveWay",null,function(t){console.log(t.data),200===t.code?e.effectiveWayOption=t.data:alert(t.message)},function(t){e.$router.push("/login")})},methods:{getTable:function(e){var t=this;t.total=e.data.total,t.tableData=e.data.content,console.log(t.tableData);for(var a=0;a<t.tableData.length;a++){var r=t.tableData[a].createdAt;t.tableData[a].createdAt=t.getDate(r),t.tableData[a].insurerName=t.tableData[a].insurer.name,t.tableData[a].insurerId=t.tableData[a].insurer.id,t.tableData[a].insurerIntro=t.tableData[a].insurer.intro,t.tableData[a].insurerCreatedAt=t.getDate(t.tableData[a].insurer.createdAt)}t.loading=!1},change:function(){this.form.insurerId=this.form.insurerName,console.log(this.form.insurerId)},handleAdd:function(){this.$router.push("/add_insurance_product")},handleEdit:function(e){var t=this;t.dialogFormVisible=!0,t.form=i()({},e),console.log(t.form)},handleSave:function(e){var t=this;t.$refs[e].validate(function(e){e&&t.$api.put("/insurerproduct",t.form,function(e){200===e.code?(t.dialogFormVisible=!1,t.$router.go(0),t.$message({message:"操作成功！",type:"success"})):alert(e.message)},function(e){t.$router.push("/login")})})},show_history:function(e){localStorage.removeItem("product");var t={id:this.tableData[e].id,productName:this.tableData[e].name};t=n()(t),localStorage.setItem("product",t),this.$router.push({path:"/insurance_history"})},handleModifyStatus:function(e){var t=this;t.form=i()({},e),t.$api.post("/insurerproduct/activation/"+t.form.id+"/"+!t.form.active,null,function(e){200===e.code?(t.$message({message:"操作成功！",type:"success"}),t.$router.go(0)):alert(e.message)},function(e){t.$router.push({path:"/login"})})},handleDelete:function(e){var t=this;t.$confirm("确认删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",cancelButtonClass:"cancel"}).then(function(){t.form=i()({},e),t.$api.delete("/insurerproduct/"+t.form.id,null,function(e){200===e.code?(t.$message({message:"操作成功！",type:"success"}),t.$router.go(0)):alert(e.message)},function(e){t.$router.push("/login")})}).catch(function(){})},handleCurrentChange:function(e){var t=this,a=this;a.loading=!0,a.currentPage=e;var r={size:a.pageSize,page:a.currentPage-1};a.$api.get("/insurerproduct",r,function(e){if(console.log(e.data),200===e.code){a.getTable(e);for(var t=0;t<e.data.content.length;t++)e.data.content[t].active=e.data.content[t].active.toString();a.loading=!1}a.loading=!1},function(e){t.$router.push({path:"/login"})})}}},c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-button",{staticClass:"tit",attrs:{type:"primary",size:"small",icon:"el-icon-circle-plus-outline"},on:{click:e.handleAdd}},[e._v("添加")]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{type:"expand",label:"详情",width:"50"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-form",{staticClass:"demo-table-expand",attrs:{"label-position":"left",inline:""}},[a("el-form-item",{attrs:{label:"保险产品名"}},[a("span",[e._v(e._s(t.row.name))])]),e._v(" "),a("el-form-item",{attrs:{label:"保险产品介绍"}},[a("span",[e._v(e._s(t.row.intro))])]),e._v(" "),a("el-form-item",{attrs:{label:"险种"}},[a("span",[e._v(e._s(t.row.category))])]),e._v(" "),a("el-form-item",{attrs:{label:"保额"}},[a("span",[e._v(e._s(t.row.coverage))])]),e._v(" "),a("el-form-item",{attrs:{label:"保障时间"}},[a("span",[e._v(e._s(t.row.span)+"月")])]),e._v(" "),a("el-form-item",{attrs:{label:"保险产品创建日期"}},[a("span",[e._v(e._s(t.row.createdAt))])]),e._v(" "),a("el-form-item",{attrs:{label:"所属保险公司"}},[a("span",[e._v(e._s(t.row.insurerName))])]),e._v(" "),a("el-form-item",{attrs:{label:"所属保险公司介绍"}},[a("span",[e._v(e._s(t.row.insurerIntro))])]),e._v(" "),a("el-form-item",{attrs:{label:"保险公司创建日期"}},[a("span",[e._v(e._s(t.row.insurerCreatedAt))])]),e._v(" "),a("el-form-item",{attrs:{label:"生效方式"}},[a("span",[e._v(e._s(t.row.effectiveWay))])]),e._v(" "),a("el-form-item",{attrs:{label:"开始日期"}},[a("span",[e._v(e._s(t.row.startTime))])]),e._v(" "),a("el-form-item",{attrs:{label:"结束日期"}},[a("span",[e._v(e._s(t.row.endTime))])]),e._v(" "),a("el-form-item",{attrs:{label:"上下架"}},[t.row.active?a("span",{staticClass:"blue"},[e._v("是")]):a("span",{staticClass:"red"},[e._v("否")])]),e._v(" "),a("el-form-item",{attrs:{label:"版本号"}},[a("span",[e._v(e._s(t.row.version))])]),e._v(" "),a("el-form-item",{attrs:{label:"编码格式"}},[a("span",[e._v(e._s(t.row.code))])])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{type:"index",label:"序号",width:"60"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"保险产品名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"category",label:"险种"}}),e._v(" "),a("el-table-column",{attrs:{prop:"effectiveWay",label:"生效方式"}}),e._v(" "),a("el-table-column",{attrs:{prop:"insurerName",label:"所属保险公司名"}}),e._v(" "),a("el-table-column",{attrs:{label:"上下架",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.active?a("span",{staticClass:"blue"},[e._v("是")]):a("span",{staticClass:"red"},[e._v("否")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"version",label:"版本号",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){e.handleEdit(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.show_history(t.$index)}}},[e._v("历史版本")]),e._v(" "),t.row.active?a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){e.handleModifyStatus(t.row)}}},[e._v("下架")]):a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){e.handleModifyStatus(t.row)}}},[e._v("上架")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.pageSize,layout:"total,prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t}}})],1),e._v(" "),a("el-dialog",{attrs:{title:"编辑保险产品",visible:e.dialogFormVisible,width:"30%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"form",attrs:{"label-position":e.labelPosition,"label-width":"110px",rules:e.rules,model:e.form}},[a("el-form-item",{attrs:{label:"保险产品名",prop:"name"}},[a("el-input",{staticStyle:{width:"80%"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"保险介绍",prop:"intro"}},[a("el-input",{staticStyle:{width:"80%"},model:{value:e.form.intro,callback:function(t){e.$set(e.form,"intro",t)},expression:"form.intro"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"险种",prop:"category"}},[a("el-select",{staticStyle:{width:"80%"},model:{value:e.form.category,callback:function(t){e.$set(e.form,"category",t)},expression:"form.category"}},e._l(e.categoryOption,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"保额",prop:"coverage"}},[a("el-input",{staticStyle:{width:"80%"},model:{value:e.form.coverage,callback:function(t){e.$set(e.form,"coverage",t)},expression:"form.coverage"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"保障时间",prop:"span"}},[a("el-input",{staticStyle:{width:"80%"},model:{value:e.form.span,callback:function(t){e.$set(e.form,"span",t)},expression:"form.span"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"所属保险公司",prop:"insurerName"}},[a("el-select",{staticStyle:{width:"80%"},on:{change:function(t){e.change()}},model:{value:e.form.insurerName,callback:function(t){e.$set(e.form,"insurerName",t)},expression:"form.insurerName"}},e._l(e.titleArr,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"生效方式",prop:"effectiveWay"}},[a("el-select",{staticStyle:{width:"80%"},model:{value:e.form.effectiveWay,callback:function(t){e.$set(e.form,"effectiveWay",t)},expression:"form.effectiveWay"}},e._l(e.effectiveWayOption,function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"编码",prop:"code"}},[a("el-input",{staticStyle:{width:"80%"},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.editLoading,expression:"editLoading"}],attrs:{type:"primary"},on:{click:function(t){e.handleSave("form")}}},[e._v("修改")]),e._v(" "),a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")])],1)],1)],1)},u=[],m={render:c,staticRenderFns:u},f=m,d=a("VU/8"),p=r,g=d(s,f,!1,p,null,null);t.default=g.exports},kYiC:function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,"\n.demo-table-expand {\n  font-size: 0;\n}\n.demo-table-expand label {\n  width: 135px;\n  color: #99a9bf;\n}\n.demo-table-expand .el-form-item {\n  margin-right: 0;\n  margin-bottom: 0;\n  width: 50%;\n}\n",""])},mvHQ:function(e,t,a){e.exports={default:a("qkKv"),__esModule:!0}},qkKv:function(e,t,a){var r=a("FeBl"),o=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(e){return o.stringify.apply(o,arguments)}}});