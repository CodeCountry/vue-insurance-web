webpackJsonp([11],{C3O8:function(t,e,a){e=t.exports=a("FZ+f")(!1),e.push([t.i,"\n.block{\n  text-align: center;\n  margin-top: 10px;\n}\n",""])},"NaQ/":function(t,e,a){var o=a("C3O8");"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);a("rjj0")("78728ffe",o,!0)},jT3x:function(t,e,a){"use strict";function o(t){a("NaQ/")}Object.defineProperty(e,"__esModule",{value:!0});var l=a("woOf"),i=a.n(l),n={data:function(){return{tableData:[],form:{},loading:!0,rules:{name:[{required:!0,message:"请输入角色名",trigger:"blur"}]},dialogFormVisible:!1,editLoading:!1,labelPosition:"left"}},created:function(){var t=this,e=this;e.$api.get("/role/all",null,function(a){console.log(a.data),200===a.code?t.getTable(a.data):alert(a.message),e.loading=!1},function(e){t.$router.push({path:"/login"})})},methods:{getTable:function(t){var e=this;e.total=t.total,e.tableData=t,console.log(e.tableData);for(var a=0;a<e.tableData.length;a++){var o=e.tableData[a].createdAt;e.tableData[a].createdAt=e.getDate(o)}e.loading=!1},handleDetail:function(t){localStorage.removeItem("roleId"),localStorage.setItem("roleId",this.tableData[t].id),this.$router.push({path:"/role_detail"})},handleAdd:function(){this.$router.push("/add_role")},editRole:function(t,e){this.dialogFormVisible=!0,this.form=i()({},e),this.table_index=t},handleSave:function(t){var e=this;e.$refs[t].validate(function(t){t&&(e.editLoading=!0,e.$api.put("/role",e.form,function(t){200===t.code?(e.editLoading=!1,e.$router.go(0),e.$message({message:"操作成功！",type:"success"})):(alert(t.message),e.editLoading=!1)},function(t){e.$router.push({path:"/login"})}))})},deleteRole:function(t){var e=this;this.$confirm("确认删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",cancelButtonClass:"cancel"}).then(function(){var a=e;a.form=i()({},t),console.log(a.form.id),a.$api.delete("/role/"+a.form.id,null,function(t){200===t.code?(a.$router.go(0),a.total=a.total-1):alert(t.message),a.loading=!1},function(t){e.$router.push({path:"/login"})})}).catch(function(){})}}},r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-button",{staticClass:"tit",attrs:{type:"primary",size:"small",icon:"el-icon-circle-plus-outline"},on:{click:t.handleAdd}},[t._v("添加")]),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"角色名"}}),t._v(" "),a("el-table-column",{attrs:{prop:"createdAt",label:"创建日期"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){t.handleDetail(e.$index)}}},[t._v("查看角色详情")]),t._v(" "),a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){t.editRole(e.$index,e.row)}}},[t._v("编辑角色")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){t.deleteRole(e.row)}}},[t._v("删除角色")])]}}])})],1),t._v(" "),a("el-dialog",{attrs:{title:"编辑角色",visible:t.dialogFormVisible,width:"30%"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{ref:"form",attrs:{"label-position":t.labelPosition,"label-width":"110px",rules:t.rules,model:t.form}},[a("el-form-item",{attrs:{label:"角色名",prop:"name"}},[a("el-input",{staticStyle:{width:"80%"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:t.editLoading,expression:"editLoading"}],attrs:{type:"primary"},on:{click:function(e){t.handleSave("form")}}},[t._v("修改")]),t._v(" "),a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取消")])],1)],1)],1)},s=[],c={render:r,staticRenderFns:s},d=c,u=a("VU/8"),f=o,m=u(n,d,!1,f,null,null);e.default=m.exports}});