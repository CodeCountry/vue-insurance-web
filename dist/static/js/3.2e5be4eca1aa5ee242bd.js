webpackJsonp([3],{"+DNv":function(e,t,o){var a=o("LqwI");"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);o("rjj0")("c4c34a58",a,!0)},CGXo:function(e,t,o){"use strict";function a(e){o("+DNv")}Object.defineProperty(t,"__esModule",{value:!0});var r=o("woOf"),l=o.n(r),i=o("mvHQ"),n=o.n(i),s={data:function(){return{isRed:!1,isBlue:!1,labelPosition:"left",formInline:{keySearch:""},tableData:[],titleArr:[],categoryOption:[],loading:!0,editLoading:!1,total:0,pageSize:20,currentPage:1,select:!1,dialogFormVisible:!1,form:{},rules:{code:[{required:!0,message:"请输入保障产品编号",trigger:"blur"}],name:[{required:!0,message:"请输入保障名称",trigger:"blur"}],holderId:[{required:!0,message:"请选择投保人",trigger:"blur"}],coverage:[{required:!0,message:"请输入保额",trigger:"blur"}],category:[{required:!0,message:"请选择险种",trigger:"blur"}],span:[{required:!0,message:"请输入期数（月）",trigger:"blur"}],priority:[{required:!0,message:"请输入优先级",trigger:"blur"}],wechatSupported:[{required:!0,message:"请选择是否支持微信进件",trigger:"blur"}],free:[{required:!0,message:"请选择是否是赠险",trigger:"blur"}],intro:[{required:!0,message:"请输入介绍",trigger:"blur"}],scope:[{required:!0,message:"请输入作用范围",trigger:"blur"}]}}},created:function(){var e=this,t=this;t.$api.get("/product",null,function(e){console.log(e.data),200===e.code?(t.getTable(e),console.log(t.tableData)):alert(e.message),t.loading=!1},function(t){e.$router.push({path:"/login"})}),t.$api.get("/holder/option/all",null,function(e){200===e.code&&(t.titleArr=e.data)},function(t){e.$router.push({path:"/login"})}),t.$api.get("/insurerproduct/insuranceCategory",null,function(e){console.log(e.data),200===e.code?t.categoryOption=e.data:alert(e.message)},function(e){t.$router.push("/login")})},methods:{getTable:function(e){var t=this;t.total=e.data.total,t.tableData=e.data.content,t.loading=!1;for(var o=0;o<t.tableData.length;o++){var a=t.tableData[o].createdAt;t.tableData[o].createdAt=t.getDate(a),t.tableData[o].holderName=t.tableData[o].holder.name,t.tableData[o].holderId=t.tableData[o].holder.id}},onSubmit:function(){var e=this,t=this;t.formInline.keySearch=t.formInline.keySearch.replace(/[\s*]/g,""),""===t.formInline.keySearch||null===t.formInline.keySearch||void 0===t.formInline.keySearch?console.log(t.formInline.keySearch):(t.select=!0,t.loading=!0,t.$api.get("/product/keyword/"+t.formInline.keySearch,null,function(t){200===t.code?e.getTable(t.data):alert(t.message)},function(t){e.$router.push({path:"/login"})}))},show_detail:function(e){localStorage.removeItem("product");var t={id:this.tableData[e].id,productName:this.tableData[e].name};t=n()(t),localStorage.setItem("product",t),this.$router.push({path:"/product_detail"})},show_history:function(e){localStorage.removeItem("product");var t={id:this.tableData[e].id,productName:this.tableData[e].name};t=n()(t),localStorage.setItem("product",t),this.$router.push({path:"/product_history"})},handleModifyStatus:function(e){var t=this;t.form=l()({},e),t.$api.post("/product/activation/"+t.form.id+"/"+!t.form.active,null,function(e){200===e.code?(t.$message({message:"操作成功！",type:"success"}),t.$router.go(0)):alert(e.message)},function(e){t.$router.push({path:"/login"})})},handleAdd:function(){this.$router.push("/add_prod")},handleEdit:function(e,t){var o=this;o.dialogFormVisible=!0,o.form=l()({},t),o.table_index=e},handleSave:function(e){var t=this,o={code:t.form.code,name:t.form.name,holderId:t.form.holderId,coverage:t.form.coverage,free:t.form.free,span:t.form.span,category:t.form.category,priority:t.form.priority,intro:t.form.intro,wechatSupported:t.form.wechatSupported,scope:t.form.scope};t.$refs[e].validate(function(e){e&&(t.editLoading=!0,t.$api.put("/product",o,function(e){200===e.code?(t.editLoading=!1,t.$router.go(0),t.$message({message:"操作成功！",type:"success"})):(alert(e.message),t.editLoading=!1)},function(e){t.$router.push({path:"/login"})}))})},handleDelete:function(e){var t=this;this.$confirm("确认删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",cancelButtonClass:"cancel"}).then(function(){var o=t;o.form=l()({},e),console.log(o.form.id),o.$api.delete("/product/"+o.form.id,null,function(e){200===e.code?(t.$message({message:"操作成功！",type:"success"}),o.$router.go(0),o.total=o.total-1):alert(e.message),o.loading=!1},function(e){t.$router.push({path:"/login"})})}).catch(function(){})},handleCurrentChange:function(e){var t=this,o=this;o.loading=!0,o.currentPage=e;var a={size:o.pageSize,page:o.currentPage-1};o.$api.get("/product",a,function(e){console.log(e.data),200===e.code?(o.getTable(e),o.loading=!1):alert(e.message),o.loading=!1},function(e){t.$router.push({path:"/login"})})}}},c=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("section",[o("el-row",[o("el-col",{attrs:{span:24}},[o("el-button",{staticStyle:{"margin-bottom":"20px"},attrs:{type:"primary",size:"small",icon:"el-icon-circle-plus-outline"},on:{click:function(t){e.handleAdd()}}},[e._v("添加")]),e._v(" "),o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[o("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),e._v(" "),o("el-table-column",{attrs:{prop:"createdAt",label:"创建日期"}}),e._v(" "),o("el-table-column",{attrs:{prop:"code",label:"保障产品编号"}}),e._v(" "),o("el-table-column",{attrs:{prop:"name",label:"保障名称"}}),e._v(" "),o("el-table-column",{attrs:{prop:"category",label:"险种",width:"100"}}),e._v(" "),o("el-table-column",{attrs:{prop:"holderName",label:"投保人"}}),e._v(" "),o("el-table-column",{attrs:{prop:"coverage",label:"保额",width:"80"}}),e._v(" "),o("el-table-column",{attrs:{prop:"span",label:"期数(月)",width:"70"}}),e._v(" "),o("el-table-column",{attrs:{label:"上下架",width:"70"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.active?o("span",{staticClass:"blue"},[e._v("是")]):o("span",{staticClass:"red"},[e._v("否")])]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"操作",fixed:"right",width:"300"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(o){e.show_detail(t.$index)}}},[e._v("查看路由")]),e._v(" "),o("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(o){e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),o("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(o){e.show_history(t.$index)}}},[e._v("历史版本")]),e._v(" "),t.row.active?o("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(o){e.handleModifyStatus(t.row)}}},[e._v("下架")]):o("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(o){e.handleModifyStatus(t.row)}}},[e._v("上架")]),e._v(" "),o("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(o){e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),o("div",{staticClass:"block"},[o("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.pageSize,layout:"total,prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t}}})],1)],1)],1),e._v(" "),o("el-dialog",{attrs:{title:"修改保障产品信息",visible:e.dialogFormVisible,width:"40%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[o("el-form",{ref:"form",attrs:{"label-position":e.labelPosition,"label-width":"150px",rules:e.rules,model:e.form}},[o("el-form-item",{attrs:{label:"保障产品编号",prop:"code"}},[o("el-input",{staticStyle:{width:"90%"},model:{value:e.form.code,callback:function(t){e.$set(e.form,"code",t)},expression:"form.code"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"保障名称",prop:"name"}},[o("el-input",{staticStyle:{width:"90%"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"投保人",prop:"holderId"}},[o("el-select",{staticStyle:{width:"90%"},model:{value:e.form.holderId,callback:function(t){e.$set(e.form,"holderId",t)},expression:"form.holderId"}},e._l(e.titleArr,function(e){return o("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))],1),e._v(" "),o("el-form-item",{attrs:{label:"保额",prop:"coverage"}},[o("el-input",{staticStyle:{width:"80%"},model:{value:e.form.coverage,callback:function(t){e.$set(e.form,"coverage",t)},expression:"form.coverage"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"是否是赠险",prop:"free"}},[o("el-radio-group",{model:{value:e.form.free,callback:function(t){e.$set(e.form,"free",t)},expression:"form.free"}},[o("el-radio",{attrs:{label:!0}},[e._v("是")]),e._v(" "),o("el-radio",{attrs:{label:!1}},[e._v("否")])],1)],1),e._v(" "),o("el-form-item",{attrs:{label:"期数（月）",prop:"span"}},[o("el-input",{staticStyle:{width:"80%"},model:{value:e.form.span,callback:function(t){e.$set(e.form,"span",t)},expression:"form.span"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"险种",prop:"category"}},[o("el-select",{model:{value:e.form.category,callback:function(t){e.$set(e.form,"category",t)},expression:"form.category"}},e._l(e.categoryOption,function(e){return o("el-option",{key:e,attrs:{label:e,value:e}})}))],1),e._v(" "),o("el-form-item",{attrs:{label:"优先级",prop:"priority"}},[o("el-input",{staticStyle:{width:"80%"},model:{value:e.form.priority,callback:function(t){e.$set(e.form,"priority",t)},expression:"form.priority"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"介绍",prop:"intro"}},[o("el-input",{staticStyle:{width:"80%"},model:{value:e.form.intro,callback:function(t){e.$set(e.form,"intro",t)},expression:"form.intro"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"是否支持微信进件",prop:"wechatSupported"}},[o("el-radio-group",{model:{value:e.form.wechatSupported,callback:function(t){e.$set(e.form,"wechatSupported",t)},expression:"form.wechatSupported"}},[o("el-radio",{attrs:{label:!0}},[e._v("是")]),e._v(" "),o("el-radio",{attrs:{label:!1}},[e._v("否")])],1)],1),e._v(" "),o("el-form-item",{attrs:{label:"适用范围",prop:"scope"}},[o("el-input",{staticStyle:{width:"90%"},attrs:{type:"textarea",rows:4},model:{value:e.form.scope,callback:function(t){e.$set(e.form,"scope",t)},expression:"form.scope"}})],1)],1),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.editLoading,expression:"editLoading"}],attrs:{type:"primary"},on:{click:function(t){e.handleSave("form")}}},[e._v("修改")]),e._v(" "),o("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")])],1)],1)],1)},u=[],d={render:c,staticRenderFns:u},p=d,m=o("VU/8"),f=a,g=m(s,p,!1,f,null,null);t.default=g.exports},LqwI:function(e,t,o){t=e.exports=o("FZ+f")(!1),t.push([e.i,"\n.el-pagination {\n    text-align: center;\n    margin-top: 30px;\n}\n/*title*/\n.title{\n    border-bottom: 1.5px solid #aaa;\n    margin-bottom: 20px;\n    padding-bottom: 10px;\n}\n/*修改样式*/\n.el-table .cell, .el-table th>div{\n    padding-left: 5px!important;\n    padding-right: 5px;\n    font-size:12.5px;\n    text-align: center;\n}\n.el-button+.el-button{\n  margin: 0!important;\n}\n",""])},mvHQ:function(e,t,o){e.exports={default:o("qkKv"),__esModule:!0}},qkKv:function(e,t,o){var a=o("FeBl"),r=a.JSON||(a.JSON={stringify:JSON.stringify});e.exports=function(e){return r.stringify.apply(r,arguments)}}});