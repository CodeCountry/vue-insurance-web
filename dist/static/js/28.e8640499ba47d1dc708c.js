webpackJsonp([28],{"/obQ":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("woOf"),l=a.n(n),o={data:function(){return{labelPosition:"left",loading:!0,editLoading:!1,form:{},tableData:[],dialogFormVisible:!1,currentPage:1,pageSize:20,total:0,rules:{name:[{required:!0,message:"请输入保险公司名",trigger:"blur"}],intro:[{required:!0,message:"请输入介绍",trigger:"blur"}]}}},created:function(){var e=this;e.$api.get("/insurer",null,function(t){console.log(t.data),200===t.code?e.getTable(t):alert(t.message),e.loading=!1},function(t){e.$router.push("/login")})},methods:{getTable:function(e){var t=this;t.total=e.data.total,t.tableData=e.data.content,console.log(t.tableData);for(var a=0;a<t.tableData.length;a++){var n=t.tableData[a].createdAt;t.tableData[a].createdAt=t.getDate(n)}t.loading=!1},handleAdd:function(){this.$router.push("/add_insurance")},handleEdit:function(e){var t=this;t.dialogFormVisible=!0,t.form=l()({},e)},handleSave:function(e){var t=this;t.$refs[e].validate(function(e){e&&(t.editLoading=!0,t.$api.put("/insurer",t.form,function(e){200===e.code?(t.$message({message:"操作成功！",type:"success"}),t.dialogFormVisible=!1,t.editLoading=!1,t.$router.go(0)):alert(e.message)},function(e){t.$router.push("/login")}))})},handleDelete:function(e){var t=this;t.$confirm("确认删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",cancelButtonClass:"cancel"}).then(function(){t.form=l()({},e),t.$api.delete("/insurer/"+t.form.id,null,function(e){200===e.code?(t.$message({message:"操作成功！",type:"success"}),t.$router.go(0)):alert(e.message)},function(e){t.$router.push("/login")})}).catch(function(){})},handleCurrentChange:function(e){var t=this,a=this;a.loading=!0,a.currentPage=e;var n={size:a.pageSize,page:a.currentPage-1};a.$api.get("/insurer",n,function(e){console.log(e.data),200===e.code?(a.getTable(e),a.loading=!1):alert(e.message),a.loading=!1},function(e){t.$router.push({path:"/login"})})}}},i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-button",{staticClass:"tit",attrs:{type:"primary",size:"small",icon:"el-icon-circle-plus-outline"},on:{click:e.handleAdd}},[e._v("添加")]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"保险公司名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"intro",label:"介绍"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createdAt",label:"创建日期"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){e.handleEdit(t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.handleDelete(t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.pageSize,layout:"total,prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t}}})],1),e._v(" "),a("el-dialog",{attrs:{title:"编辑保险公司",visible:e.dialogFormVisible,width:"30%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"form",attrs:{"label-position":e.labelPosition,"label-width":"110px",rules:e.rules,model:e.form}},[a("el-form-item",{attrs:{label:"保险公司名",prop:"name"}},[a("el-input",{staticStyle:{width:"80%"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"介绍",prop:"intro"}},[a("el-input",{staticStyle:{width:"80%"},model:{value:e.form.intro,callback:function(t){e.$set(e.form,"intro",t)},expression:"form.intro"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.editLoading,expression:"editLoading"}],attrs:{type:"primary"},on:{click:function(t){e.handleSave("form")}}},[e._v("修改")]),e._v(" "),a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")])],1)],1)],1)},r=[],s={render:i,staticRenderFns:r},c=s,u=a("VU/8"),d=u(o,c,!1,null,null,null);t.default=d.exports}});