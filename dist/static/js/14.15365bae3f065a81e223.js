webpackJsonp([14],{"/vzp":function(e,t,a){t=e.exports=a("FZ+f")(!1),t.push([e.i,"\n.block{\n  text-align: center;\n  margin-top: 10px;\n}\n",""])},"1OYm":function(e,t,a){var o=a("/vzp");"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);a("rjj0")("5c48e682",o,!0)},gNBu:function(e,t,a){"use strict";function o(e){a("1OYm")}Object.defineProperty(t,"__esModule",{value:!0});var l=a("woOf"),i=a.n(l),n={data:function(){return{tableData:[],form:{},rules:{name:[{required:!0,message:"请输入权限名",trigger:"blur"}],conditions:[{required:!0,message:"请输入条件",trigger:"blur"}],entity:[{required:!0,message:"请输入操作对象",trigger:"blur"}],type:[{required:!0,message:"请输入类型",trigger:"blur"}]},loading:!1,total:0,pageSize:20,currentPage:1,dialogFormVisible:!1,editLoading:!1,labelPosition:"left"}},created:function(){var e=this;this.$api.get("/right",null,function(t){console.log(t.data),200===t.code?e.getTable(t):alert(t.message)},function(t){e.$router.push({path:"/login"})})},methods:{getTable:function(e){var t=this;t.total=e.data.total,t.tableData=e.data.content,console.log(t.tableData);for(var a=0;a<t.tableData.length;a++){var o=t.tableData[a].createdAt;t.tableData[a].createdAt=t.getDate(o)}t.loading=!1},handleAdd:function(){this.$router.push("/add_right")},editRole:function(e,t){this.dialogFormVisible=!0,this.form=i()({},t),this.table_index=e},handleSave:function(e){var t=this;t.$refs[e].validate(function(e){e&&(t.editLoading=!0,t.$api.put("/right",t.form,function(e){200===e.code?(t.editLoading=!1,t.$router.go(0),t.$message({message:"操作成功！",type:"success"})):(alert(e.message),t.editLoading=!1)},function(e){t.$router.push({path:"/login"})}))})},deleteRole:function(e){var t=this;this.$confirm("确认删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",cancelButtonClass:"cancel"}).then(function(){var a=t;a.form=i()({},e),console.log(a.form.id),a.$api.delete("/right/"+a.form.id,null,function(e){200===e.code?(a.$message({message:"操作成功！",type:"success"}),a.$router.go(0),a.total=a.total-1):alert(e.message),a.loading=!1},function(e){t.$router.push({path:"/login"})})}).catch(function(){})},handleCurrentChange:function(e){var t=this,a=this;a.loading=!0,a.currentPage=e;var o={size:a.pageSize,page:a.currentPage-1};a.$api.get("/right",o,function(e){console.log(e.data),200===e.code?(a.getTable(e),a.loading=!1):alert(e.message),a.loading=!1},function(e){t.$router.push({path:"/login"})})}}},r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-button",{staticClass:"tit",attrs:{type:"primary",size:"small",icon:"el-icon-circle-plus-outline"},on:{click:e.handleAdd}},[e._v("添加")]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"权限名"}}),e._v(" "),a("el-table-column",{attrs:{prop:"conditions",label:"条件"}}),e._v(" "),a("el-table-column",{attrs:{prop:"entity",label:"操作对象"}}),e._v(" "),a("el-table-column",{attrs:{prop:"type",label:"类型"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createdAt",label:"创建日期"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){e.editRole(t.$index,t.row)}}},[e._v("编辑权限")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.deleteRole(t.row)}}},[e._v("删除权限")])]}}])})],1),e._v(" "),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.pageSize,layout:"total,prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t}}})],1),e._v(" "),a("el-dialog",{attrs:{title:"编辑权限",visible:e.dialogFormVisible,width:"30%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"form",attrs:{"label-position":e.labelPosition,"label-width":"110px",rules:e.rules,model:e.form}},[a("el-form-item",{attrs:{label:"权限名",prop:"name"}},[a("el-input",{staticStyle:{width:"80%"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"条件",prop:"conditions"}},[a("el-input",{staticStyle:{width:"80%"},model:{value:e.form.conditions,callback:function(t){e.$set(e.form,"conditions",t)},expression:"form.conditions"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"操作对象",prop:"entity"}},[a("el-input",{staticStyle:{width:"80%"},model:{value:e.form.entity,callback:function(t){e.$set(e.form,"entity",t)},expression:"form.entity"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"类型",prop:"type"}},[a("el-select",{staticStyle:{width:"80%"},model:{value:e.form.type,callback:function(t){e.$set(e.form,"type",t)},expression:"form.type"}},[a("el-option",{attrs:{value:"View"}}),e._v(" "),a("el-option",{attrs:{value:"Update"}}),e._v(" "),a("el-option",{attrs:{value:"New"}}),e._v(" "),a("el-option",{attrs:{value:"Delete"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{directives:[{name:"loading",rawName:"v-loading",value:e.editLoading,expression:"editLoading"}],attrs:{type:"primary"},on:{click:function(t){e.handleSave("form")}}},[e._v("修改")]),e._v(" "),a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")])],1)],1)],1)},s=[],c={render:r,staticRenderFns:s},u=c,d=a("VU/8"),g=o,p=d(n,u,!1,g,null,null);t.default=p.exports}});